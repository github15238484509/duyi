"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(a="Object"===a&&t.constructor?t.constructor.name:a)||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var stuData=[{stuId:1,stuName:"谢杰",stuGender:"男",stuEmail:"123@qq.com",stuAge:18,stuTel:13112341234,stuAddr:"成都"},{stuId:2,stuName:"张三",stuGender:"男",stuEmail:"234@qq.com",stuAge:19,stuTel:13112341234,stuAddr:"北京"},{stuId:3,stuName:"李四",stuGender:"女",stuEmail:"789@qq.com",stuAge:18,stuTel:13112341234,stuAddr:"哈尔滨"}],editStuId=null,curPage=1,pageNum=null,eachPage=5;function goToStuList(){$(".leftMenuItem").classList.add("itemActive"),$$(".leftMenuItem")[1].classList.remove("itemActive"),$(".rightContent>div").classList.remove("notShow"),$$(".rightContent>div")[1].classList.add("notShow"),clearForm()}function goToAddStu(e){var t;e&&(t=stuData.filter(function(t){return t.stuId===parseInt(e)})[0],$("#stuName").value=t.stuName,$("#stuEmail").value=t.stuEmail,$("#stuAge").value=t.stuAge,$("#stuTel").value=t.stuTel,$("#stuAddr").value=t.stuAddr,"男"===t.stuGender?$(".gender").checked=!0:$$(".gender")[1].checked=!0,editStuId=t.stuId,$("#addStuBtn").value="确认修改"),$(".leftMenuItem").classList.remove("itemActive"),$$(".leftMenuItem")[1].classList.add("itemActive"),$(".rightContent>div").classList.add("notShow"),$$(".rightContent>div")[1].classList.remove("notShow")}function changeItem(){$(".leftMenu").addEventListener("click",function(t){("学生列表"===t.target.innerHTML?goToStuList:goToAddStu)()})}function renderContent(t){renderPager(t);t=(t=t.slice((curPage-1)*eachPage,curPage*eachPage)).map(function(t){return"\n            <tr>\n                <td>".concat(t.stuId,"</td>\n                <td>").concat(t.stuName,"</td>\n                <td>").concat(t.stuGender,"</td>\n                <td>").concat(t.stuEmail,"</td>\n                <td>").concat(t.stuAge,"</td>\n                <td>").concat(t.stuTel,"</td>\n                <td>").concat(t.stuAddr,"</td>\n                <td>\n                    <button data-id=").concat(t.stuId,' class="operationBtn editBtn">编辑</button>\n                    <button data-id=').concat(t.stuId,' class="operationBtn delBtn">删除</button>\n                </td>\n            </tr>\n        ')}).join("");$("#stuTable").innerHTML="".concat("\n        <thead>\n            <tr>\n                <th>学号</th>\n                <th>姓名</th>\n                <th>性别</th>\n                <th>邮箱</th>\n                <th>年龄</th>\n                <th>手机号</th>\n                <th>住址</th>\n                <th>操作</th>\n            </tr>\n        </thead>\n    ","<tBody>").concat(t,"</tBody>")}function clearForm(){$("#addStuForm").reset();for(var t=_toConsumableArray($$(".regValidate")),e=0;e<t.length;e++)t[e].innerHTML="";$("#addStuBtn").value="提交"}function renderPager(t){var e=$("#page").innerHTML="",t=Math.ceil(t.length/eachPage);t<8?e=createLi(e,1,t,curPage):curPage<=3?(e=createLi(e,1,3,curPage),e+="...."+'<li class="pageNum">'.concat(t,"</li>")):t-3<curPage?(e+='<li class="pageNum">1</li>....',e=createLi(e,t-3,t,curPage)):(e+='<li class="pageNum">1</li>....',e=createLi(e,curPage-2,curPage+2,curPage),e+="...."+'<li class="pageNum">'.concat(t,"</li>")),$("#page").innerHTML='\n        <ul id="pageSelect" class="pagination">\n            <li class="prevPage">&lt;</li>\n            '.concat(e,'\n            <li class="nextPage">&gt;</li>\n        </ul>\n    ')}function main(){changeItem(),renderContent(stuData)}$("#addStuRandom").addEventListener("click",function(){var t={stuName:randomContent(lastName,1)+(.5<Math.random()?randomContent(firstName,1):randomContent(firstName,2)),stuGender:.5<Math.random()?"男":"女",stuEmail:randomContent(charArr,Math.floor(5*Math.random()+4))+"@"+randomContent(charArr,2)+".com",stuAge:Math.floor(11*Math.random()+20),stuTel:1+randomContent(numArr,10),stuAddr:randomContent(cityName,1)};t.stuId=stuData[stuData.length-1].stuId+1,stuData.push(t),curPage=Math.ceil(stuData.length/eachPage),renderContent(stuData)}),$("#addStuBtnByForm").addEventListener("click",function(){goToAddStu()}),$("#addStuBtn").addEventListener("click",function(){var t=[$("#stuName").value,$(".gender").checked?"男":"女",$("#stuEmail").value,$("#stuAge").value,$("#stuTel").value,$("#stuAddr").value];if(t.every(function(t){return""!==t}))if(_toConsumableArray($$(".regValidate")).every(function(t){return""===t.innerHTML})){var e={stuName:t[0],stuGender:t[1],stuEmail:t[2],stuAge:t[3],stuTel:t[4],stuAddr:t[5]};if("提交"===$("#addStuBtn").value)e.stuId=stuData[stuData.length-1].stuId+1,stuData.push(e),curPage=Math.ceil(stuData.length/eachPage);else{e.stuId=editStuId;for(var a=0;a<stuData.length;a++)if(stuData[a].stuId===editStuId){stuData.splice(a,1,e);break}}renderContent(stuData),goToStuList()}else window.alert("请按照要求填写每一项");else window.alert("请填写表单的所有项目")}),$("#backStuList").addEventListener("click",function(){clearForm(),goToStuList()}),$("#stuTable").addEventListener("click",function(t){if(t.target.classList.contains("editBtn")&&goToAddStu(t.target.dataset.id),t.target.classList.contains("delBtn")&&window.confirm("是否要删除此名学生？")){for(var e=t.target.dataset.id,a=0;a<stuData.length;a++)if(stuData[a].stuId===parseInt(e)){stuData.splice(a,1);break}t=Math.ceil(stuData.length/eachPage);t<curPage&&(curPage=t),renderContent(stuData)}}),$("#page").addEventListener("click",function(t){if(t.target.classList.contains("prevPage")){if(!--curPage)return curPage=1,void window.alert("当前已经是第一页了");renderContent(stuData)}if(t.target.classList.contains("nextPage")){curPage++;var e=Math.ceil(stuData.length/eachPage);if(e<curPage)return curPage=e,void window.alert("当前已经是最后一页了");renderContent(stuData)}t.target.classList.contains("pageNum")&&(curPage=parseInt(t.target.innerText),renderContent(stuData))}),$("#searchBtn").addEventListener("click",function(t){var e=$("#selectSearchItem").value,a=$("#searchStu").value;if(a){switch(e){case"stuId":var n=stuData.filter(function(t){return t.stuId===parseInt(a)});break;case"stuName":n=stuData.filter(function(t){return t.stuName===a})}curPage=1,renderContent(n)}else window.alert("请填写搜索内容")}),$("#backBtn").addEventListener("click",function(){$("#searchStu").value="",renderContent(stuData)}),main();