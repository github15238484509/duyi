!function(e,s){function t(t){this.dom=t,this.data=null,this.imgTimer=null,this.constructorIndex=null}t.prototype={init(){this.getDom(),this.getData("../mock/data.json")},getData(t){e.ajax({url:t,methods:"get",success:t=>{this.data=t,this.constructorIndex=new s.constructorIndex(t.length),console.log(this.constructorIndex),this.loadMusic(this.constructorIndex.index),this.controlMusic()}})},getDom(){this.record=document.querySelector(".songImg img"),this.controlBtns=document.querySelectorAll(".control li"),this.name=document.querySelector(".name"),this.singer=document.querySelector(".singer"),this.album=document.querySelector(".album")},loadMusic(t){s.render(this.data[t],this),s.music.load(this.data[t].audioSrc),"play"===s.music.status&&(this.controlBtns[2].className="playing",s.music.play())},controlMusic(){var e=this;this.controlBtns[1].addEventListener("touchend",()=>{s.music.status="play",this.loadMusic(this.constructorIndex.prev())}),this.controlBtns[2].addEventListener("touchend",function(){var t="pause"==s.music.status?"play":"pause";this.className="pause"==s.music.status?"playing":"",s.music[t](),"play"==t?e.imgRotate(e.record.rotate||0):e.imgStopRotate()}),this.controlBtns[3].addEventListener("touchend",()=>{s.music.status="play",this.loadMusic(this.constructorIndex.next()),this.imgRotate(0)})},imgRotate(t){clearInterval(this.imgTimer),this.imgTimer=setInterval(()=>{t+=.2,this.record.style.transform=`rotate(${t}deg)`,this.record.rotate=t},1e3/60)},imgStopRotate(){clearInterval(this.imgTimer)}};const o=new t(document.querySelector("#wrap"));o.init(),console.log(o)}(window.Zepto,window.player);